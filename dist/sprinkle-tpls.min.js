angular.module("mnd.sprinkle",[]).factory("MndWordProcessingService",function(){return function(n){var t={};if(2===n.length)t.left=n[0],t.pivot=n[1],t.right="";else{var e=Math.ceil(n.length/2-1);t.left=n.slice(0,e),t.right=n.slice(e+1),t.pivot=n.slice(e,e+1)}return t.multiplier=/[\,\:\;]$/g.test(n)?1.5:/[\.\!\?]$/g.test(n)?2:1,t}}).factory("MndWordSplittingService",function(){return function(n){var t=n.split(/\s+/);return t}}).directive("mndSprinkle",["$timeout","MndWordSplittingService","MndWordProcessingService",function(n,t,e){return{restrict:"EA",templateUrl:"templates/sprinkle.html",scope:{text:"@",defaultWpm:"@?",progressPercentage:"=?"},link:function(r){r._words=t(r.text),r._wordIndex=0,r._msPerWord=function(){return Math.floor(6e4/r._wpm)},r.increaseSpeed=function(n){var t=r._wpm;t+=n||50,r._wpm=t},r.decreaseSpeed=function(n){var t=r._wpm;t-=n||50,50>t&&(t=50),r._wpm=t},r._wpm=parseInt(r.defaultWpm||"250",10);var s=function(){var t=r._words[r._wordIndex],i=e(t);r.word=i;var o=i.multiplier*r._msPerWord();r._wordIndex++,r.progressPercentage=r._wordIndex/r._words.length*100,r._wordIndex<r._words.length?r._timeout=n(s,o):(r.running=!1,r._wordIndex=0)};r.running=!1,r.start=function(){r.running||(r.running=!0,s())},r.pause=function(){r.running&&(n.cancel(r._timeout),r.running=!1)},r.rewind=function(){r._wordIndex=0},r.stop=function(){r.pause(),r.rewind()}}}}]),function(n){try{n=angular.module("mnd.sprinkle")}catch(t){n=angular.module("mnd.sprinkle",[])}n.run(["$templateCache",function(n){n.put("templates/sprinkle.html",'<div class="spray-container">\n	<div class="spray-result">\n		<span class="spray-left">\n			&nbsp;\n			{{word.left}}\n		</span>\n		<span class="spray-pivot">\n			{{word.pivot}}\n		</span>\n		<span class="spray-right">\n			{{word.right}}\n		</span>\n	</div>\n</div>\n<br />\n<br />\n<br />\n<button type="button" class="btn btn-default" ng-click="start()">Start</button>\n&nbsp;\n<button type="button" class="btn btn-default" ng-click="pause()">Pause</button>\n&nbsp;\n<button type="button" class="btn btn-default" ng-click="stop()">Stop</button>\n&nbsp;\n<button type="button" class="btn btn-default" ng-click="rewind()">Rewind</button>\n&nbsp;\n<button type="button" class="btn btn-default" ng-click="increaseSpeed()">Più veloce</button>\n&nbsp;\n<button type="button" class="btn btn-default" ng-click="decreaseSpeed()">Più lento</button>\n&nbsp;\n{{_wpm}} wpm\n')}])}();