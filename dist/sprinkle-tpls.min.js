angular.module("mnd.sprinkle",[]).factory("MndWordProcessingService",function(){return function(n){var r={};if(2===n.length)r.left=n[0],r.pivot=n[1],r.right="";else{var e=Math.ceil(n.length/2-1);r.left=n.slice(0,e),r.right=n.slice(e+1),r.pivot=n.slice(e,e+1)}return r.multiplier=/[\,\:\;]$/g.test(n)?1.5:/[\.\!\?]$/g.test(n)?2:1,r}}).factory("MndWordSplittingService",function(){return function(n){var r=n.split(/\s+/);return r}}).directive("mndSprinkle",["$timeout","MndWordSplittingService","MndWordProcessingService",function(n,r,e){return{restrict:"EA",templateUrl:"templates/sprinkle.html",scope:{text:"@",defaultWpm:"@?",autoplay:"@?",autoplayDelay:"@?",progressPercentage:"=?"},link:function(i){i._words=r(i.text),i._wordIndex=0,i._msPerWord=function(){return Math.floor(6e4/i.wpm)},i.increaseSpeed=function(n){var r=i.wpm;r+=n||50,i.wpm=r},i.decreaseSpeed=function(n){var r=i.wpm;r-=n||50,50>r&&(r=50),i.wpm=r},i.wpm=parseInt(i.defaultWpm||"250",10);var t=function(){var r=i._words[i._wordIndex],s=e(r);i.word=s;var a=s.multiplier*i._msPerWord();i._wordIndex++,i.progressPercentage=i._wordIndex/i._words.length*100,i._wordIndex<i._words.length?i._timeout=n(t,a):(i.running=!1,i._wordIndex=0)};if(i.running=!1,i.start=function(){i.running||(i.running=!0,t())},i.pause=function(){i.running&&(n.cancel(i._timeout),i.running=!1)},i.rewind=function(){i._wordIndex=0},i.stop=function(){i.pause(),i.rewind()},"true"===i.autoplay){var s=parseInt(i.autoplayDelay,10),a=isNaN(s)?0:s;n(function(){i.start()},1e3*a)}}}}]),function(n){try{n=angular.module("mnd.sprinkle")}catch(r){n=angular.module("mnd.sprinkle",[])}n.run(["$templateCache",function(n){n.put("templates/sprinkle.html",'<div class="spray-container">\n	<div class="spray-result">\n		<div class="sprinkle-center-line"></div>\n		<span class="spray-left">\n			&nbsp;\n			{{word.left}}\n		</span>\n		<span class="spray-pivot">\n			{{word.pivot}}\n		</span>\n		<span class="spray-right">\n			{{word.right}}\n		</span>\n	</div>\n	<div class="sprinkle-control-bar">\n		<div class="sprinkle-control-bar-left">\n			<div class="sprinkle-control-btn" ng-click="rewind()"><i class="fa fa-fast-backward"></i></div>\n			<div class="sprinkle-control-btn" ng-click="stop()"><i class="fa fa-stop"></i></div>\n			<div class="sprinkle-control-btn" ng-click="pause()"><i class="fa fa-pause"></i></div>\n			<div class="sprinkle-control-btn" ng-click="start()"><i class="fa fa-play"></i></div>\n		</div>\n		<div class="sprinkle-control-bar-right">\n			<div class="sprinkle-control-btn" ng-click="decreaseSpeed()"><i class="fa fa-minus"></i></div>\n			<div class="sprinkle-control-btn wpm-btn">{{wpm}} wpm </div>\n			<div class="sprinkle-control-btn" ng-click="increaseSpeed()"><i class="fa fa-plus"></i></div>\n		</div>\n	</div>\n<br />\n<br />\n<br />\n\n</div>\n')}])}();